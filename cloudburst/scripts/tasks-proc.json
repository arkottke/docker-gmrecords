{
	"programName": "gmrecords",
	"$schema": "tasks.schema.json",
	"itemName": "${WORK_ITEM}",
	"fetch": [
		{
			"name": "fetch configs",
			"bucket": "${BUCKET_NAME}",
			"key": "database/conf",
			"dest": "/working/conf",
			"exitOnError": true
		},
		{
			"name": "fetch project config",
			"bucket": "${BUCKET_NAME}",
			"key": "database/.gmprocess",
			"dest": "/working/.gmprocess",
			"exitOnError": true
		},
		{
			"name": "fetch workspace file",
			"bucket": "${BUCKET_NAME}",
			"key": "database/downloaded/${WORK_ITEM}/workspace.h5",
			"dest": "/working/data/${WORK_ITEM}/workspace.h5",
			"exitOnError": true
		}
	],
	"tasks": [
		{
			"name": "running process.sh",
			"command": "bash process.sh ${WORK_ITEM}"
		}
	],
	"store": [
		{
			"name": "store log output",
			"bucket": "${BUCKET_NAME}",
			"source": "/working/${WORK_ITEM}.log",
			"dest": "database/data/${WORK_ITEM}/process.log",
			"compress": false,
			"exitOnError": true
		},
		{
			"name": "store h5 output",
			"bucket": "${BUCKET_NAME}",
			"source": "/working/data/${WORK_ITEM}/workspace.h5",
			"dest": "database/data/${WORK_ITEM}/workspace.h5",
			"compress": false,
			"exitOnError": true
		},
		{
			"name": "store mtables",
			"bucket": "${BUCKET_NAME}",
			"source": "/working/data/${WORK_ITEM}/mtables-${WORK_ITEM}.tar.gz",
			"dest": "database/data/${WORK_ITEM}/mtables-${WORK_ITEM}.tar.gz",
			"compress": false,
			"exitOnError": true
		}
	]
}
